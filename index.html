<head>
    <title>DailyMe</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" type="text/css" href="animate.css">
    <link rel="shortcut icon" href="https://dailyme.000webhostapp.com/favicon.ico" />
</head>

<body style="background-Color:#419D78;" ng-app="myApp" ng-controller="myCtrl">
    <div class="master">
        <form>
            <div class="input-group controllers">
                <button class="glyphicon glyphicon-cog config-button" type="button" id="buttonConfig" onclick="$('#memberModal').modal('show')"></button>
                <button class="btn btn-primary" type="button" id="buttonPlay" onclick="playTimer()">
                    <i class="glyphicon glyphicon-play"></i> Play Daily</button>
                <button class="btn btn-danger" type="button" id="buttonPause" onclick="pauseTimer()">
                    <i class="glyphicon glyphicon-pause"></i> Pause Daily</button>
                <button class="btn btn-warning" type="button" id="buttonReset" onclick="resetTimer()">
                    <i class="glyphicon glyphicon-refresh"></i> Reset Daily</button>
                <label class="check-box-out"><input type="checkbox" checked="true" ng-model="mustPlaySounds"> Play Sounds?</label>
            </div>
        </form>
        <div class="container">
            <div class="row">
                <div class="col-sm-12" style="background-color:yellow;">
                    <div class="finished-message" id="finished-message" style="display:none"><span>Daily Finished!</span></div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-8">
                    <div class="timer" id="timer" style="display:none"><span>{{minutesMaster}}</span>:<span>{{secondsMaster}}</span></div>
                </div>
                <div class="col-sm-4">
                    <div class="panel panel-info">
                        <div class="panel-heading box box-yellow">
                            <h3 class="panel-title">Participants List</h3>
                            <div style="overflow-y: scroll; height:250px;">
                                <div ui-sortable="sortableOptionsList" class="screen" ng-model="peopleList">
                                    <div class="person-item" ng-repeat="people in peopleList">{{$index + 1}} {{people.name}}</div>
                                </div>
                            </div>
                            <div style="clear: both;"></div>
                        </div>
                    </div>  
                </div>


            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="memberModal" role="dialog" aria-labelledby="memberModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="initApplication()"><span aria-hidden="true">&times;</span>
                </button>
                    <h4 class="modal-title" id="memberModalLabel">{{modalTitle}}</h4>

                </div>
                <div class="modal-body">
                    <div class="col-sm-6">
                        <div class="input-group input-group-modal">
                            <span class="span-title-modal">Please set the parameters below: </span>
                        </div>
                        <div class="input-group input-group-modal">
                            <input type="number" class="form-control input-modal" id="peopleOnDaily" min="1" max="99" ng-model="peopleOnDaily" />
                            <span class="span-label-modal">Number of People in the Daily</span>
                        </div>
                        <div class="input-group input-group-modal">
                            <input type="number" class="form-control input-modal" id="minutesPerPerson" min="1" max="99" ng-model="minutesPerPerson"
                            />
                            <span class="span-label-modal">Time Limit Per Person (Minutes)</span>
                        </div>
                        <div class="input-group input-group-modal">
                            <label><input type="checkbox" checked="true" ng-model="mustPlaySounds"> Play Sounds?</label>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="input-group input-margin-top">
                            <input type="text" class="form-control" id="nameToAdd" ng-model="peopleToAdd"/>
                            <span class="input-group-addon" ng-click="addItemToPeopleList(peopleToAdd)" style="cursor:pointer;"><i class="glyphicon glyphicon-plus"></i></span>
                        </div>
                        
                        <div class="panel panel-info">
                            <div class="panel-heading box box-yellow">
                                <h3 class="panel-title">Participants List</h3>
                                <div style="overflow-y: scroll; height:250px;">
                                    <div ui-sortable="sortableOptionsList" class="screen" ng-model="peopleList">
                                        <div class="person-item-modal" ng-repeat="people in peopleList">
                                            {{$index + 1}} {{people.name}} <span class="glyphicon glyphicon-trash item-glyphicon" ng-click="removeItemFromPeopleList($index)"></span>
                                        </div>
                                    </div>
                                </div>
                                <div style="clear: both;"></div>
                            </div>
                        </div>  
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="initApplication()">Save</button>
                </div>
            </div>
        </div>
    </div>

</body>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<script src="bootstrap-notify.min.js"></script>
<link rel="stylesheet" href="jquery-ui.css">
<script src="jquery-ui.min.js"></script>
<script src="https://rawgithub.com/angular-ui/ui-sortable/master/src/sortable.js"></script>
<script src="index.js"></script>

<script>
    var modalTitle = "DailyMe";
    var minutesMaster;
    var secondsMaster;

    var app = angular.module('myApp', ['ui.sortable']);
    app.controller('myCtrl', function ($scope) {
        $scope.modalTitle = modalTitle;
        $scope.minutesMaster = minutesMaster;
        $scope.secondsMaster = secondsMaster;
        $scope.peopleOnDaily = 10;
        $scope.minutesPerPerson = 2;
        $scope.mustPlaySounds = true;
        $scope.peopleToAdd = "";
        $scope.minutesToStart = function () {
            if ($scope.peopleOnDaily != undefined && $scope.minutesPerPerson != undefined) {
                return $scope.peopleOnDaily * $scope.minutesPerPerson;
            }
            else {
                return 1;
            }
        };

        $scope.peopleList = [
            // {
            // name: 'Wonder Woman'
            // }, {
            // name: 'Thor'
            // }, {
            // name: 'SpiderMan'
            // }, {
            // name: 'IronMan'
            // }, {
            // name: 'Hulk'
            // }
        ];

        $scope.addItemToPeopleList = function(name){
            if (name != "") {
                var people = {name: name};
                $scope.peopleList.push(people);
                $scope.peopleToAdd = "";   
            }
        }
        
        $scope.removeItemFromPeopleList = function(index){
            $scope.peopleList.splice(index, 1);
        }

    });

    $('#memberModal').modal({ backdrop: 'static', keyboard: false });

</script>